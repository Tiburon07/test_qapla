/**
 * Oggetto gestione dell'interfaccia
 *
 */
(function() {

    let _this = null;

    /**
     * Costruttore della classe
     * @constructor
     */
    Tracking = function() {

        /*------------------------------------------------------------------
        --- VARIABILI DI CLASSE ---
        --------------------------------------------------------------------*/
        _this = this;

        /*------------------------------------------------------------------
        --- ELEMENTI HTML ---
        --------------------------------------------------------------------*/
        this._btnCerca = $('#cerca');
        this._t_number = $('#tracking_number');

        /*------------------------------------------------------------------
        --- EVENTI ---
        --------------------------------------------------------------------*/
        this._btnCerca.off('click').on('click', this._onClickBtnCerca.bind(this));

        this._load();
    };

    /*
     * Pattern Singleton
     * @return Ritorna l'istanza dell'oggetto
     */
    Tracking.getInstance = function() {
        if (_this === null) _this = new Tracking();
        return _this;
    };

    /***********************************************************************************************************************
     * HANDLER/LISTENER
     * **********************************************************************************************************************/
    Tracking.prototype._onClickBtnCerca = function(e){
        let t_number = this._t_number.val();
        this._getHistory(t_number);
    }

    /***********************************************************************************************************************
     * PRIVATE FUNCTION
     * **********************************************************************************************************************/
    Tracking.prototype._getHistory = function(t_number) {
        
        $.ajax({
            url: "index.php?controller=Tracking&action=getHistory&tracking_number="+t_number,
            type: 'GET',
            dataType: 'json', // added data type
            success: function(res) {
                $('#json').html(JSON.stringify(res, undefined, 2))
            }
        });
    }

    Tracking.prototype._load = function(value, array) {

    }

    /***********************************************************************************************************************
     * FUNCTION SETTER
     * **********************************************************************************************************************/

    /***********************************************************************************************************************
     * FUNCTION GETTER
     * **********************************************************************************************************************/

    /***********************************************************************************************************************
     * FUNCTION UTILITY
     * **********************************************************************************************************************/

})();